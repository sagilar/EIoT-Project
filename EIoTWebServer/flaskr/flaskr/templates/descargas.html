{% extends "layout.html" %}
{% block title %}Descargas{% endblock %}
{% block head %}
{{ super() }}
{% endblock %}
{% block content %}
<!-- Breadcrumbs-->
<ol class="breadcrumb">
	<li class="breadcrumb-item">
		<a href="#">Dashboard</a>
	</li>
	<li class="breadcrumb-item active">Descargas</li>
</ol>

<!--   Descargas EIoT -->
<div class="row">
	<div class="col-lg-7">
		<div class="card mb-3">
			<div class="card-header">
				<i class="fa fa-download"></i> Sección de Descargas EIoT</div>
				<div class="card-body">
					<div class="row">
						<div class="col-lg-6">
							Descarga de Archivos en texto plano para posterior procesamiento. El archivo se descarga con formato .CSV
							<br>
							<a target="_blank" id="descargaCSVEiot" href="/descargas/descargararchivoseiot/csv">
								<button type="button" class="btn btn-info">Descargar CSV EIoT</button>
							</a>
						</div>
						<div class="col-lg-6">
							Descarga de Archivos para Excel, adecuados para la gestión gráfica. El archivo se descarga con formato .xlsx
							<br>
							<a target="_blank" id="descargaXLSXEiot" href="/descargas/descargararchivoseiot/xlsx">
								<button type="button" class="btn btn-info">Descargar XLSX EIoT</button>
							</a>
						</div>

					</div>
					
				</div>
				<div class="card-footer small text-muted">Archivos de los registros</div>
			</div>
		</div>
		<div class="col-lg-5">
			<div class="card mb-3">
				<div class="card-header">
					<i class="fa fa-download"></i> Sección de Recomendaciones EIoT</div>
					<div class="card-body">

						<div>
							

							<div class="card text-white bg-info o-hidden h-100">
								<div class="card-body">
									<div class="card-body-icon">
										<i class="fa fa-fw fa-download"></i>
									</div>
									<div class="mr-5">Recomendaciones para la gestión de los dispositivos EIoT</div>
								</div>
								<a id="descargaRecomendEiot" class="card-footer text-white clearfix small z-1" href="#">
									<span class="float-left">Descargar</span>
									<span class="float-right">
										<i class="fa fa-angle-right"></i>
									</span>
								</a>
							</div>
							
						</div>
						
					</div>
					<div class="card-footer small text-muted">Información de valor agregado</div>
				</div>
			</div>

		</div>
		<br>
		<!--   Descargas Refrigeradores -->
		<div class="row">
			<div class="col-lg-7">
				<div class="card mb-3">
					<div class="card-header">
						<i class="fa fa-download"></i> Sección de Descargas Refrigeradores</div>
						<div class="card-body">
							<div class="row">
								<div class="col-lg-6">
									Descarga de Archivos en texto plano para posterior procesamiento. El archivo se descarga con formato .CSV
									<br>
									<a target="_blank" id="descargaCSVRefrig" href="/descargas/descargararchivosrefrigeradores/csv">
										<button type="button" class="btn btn-primary" >Descargar CSV Refrigeradores</button>
									</a>
								</div>
								<div class="col-lg-6">
									Descarga de Archivos para Excel, adecuados para la gestión gráfica. El archivo se descarga con formato .xlsx
									<br>
									<a target="_blank" id="descargaXLSXRefrig" href="/descargas/descargararchivosrefrigeradores/xlsx">
										<button type="button" class="btn btn-primary">Descargar XLSX Refrigeradores</button>
									</a>
								</div>

							</div>

						</div>
						<div class="card-footer small text-muted">Archivos de los registros</div>
					</div>
				</div>
				<div class="col-lg-5">
					<div class="card mb-3">
						<div class="card-header">
							<i class="fa fa-download"></i> Sección de Recomendaciones Refrigeradores Inteligentes</div>
							<div class="card-body">

								<div class="card text-white bg-primary o-hidden h-100">
									<div class="card-body">
										<div class="card-body-icon">
											<i class="fa fa-fw fa-download"></i>
										</div>
										<div class="mr-5">Recomendaciones para la gestión de los refrigeradores inteligentes</div>
									</div>
									<a id="descargaRecomendRefrig" class="card-footer text-white clearfix small z-1" href="#">
										<span class="float-left">Descargar</span>
										<span class="float-right">
											<i class="fa fa-angle-right"></i>
										</span>
									</a>
								</div>
							</div>
							<div class="card-footer small text-muted">Información de valor agregado</div>
						</div>
					</div>

				</div>

				{% endblock %}
				
				{% block scripts %}
				<script src="{{url_for('static', filename = 'vendor/jquery-filedownload/jquery.fileDownload.js')}}"></script>
				<script>
				$( document ).ready(function() {
				  switch (window.location.href)
				  {
					case "http://192.168.137.100:5000/descargas/descargararchivoseiot/csv":
					$.fileDownload('{{url_for('static', filename = 'eiot-csv.zip')}}');
					setTimeout(function() {
					  window.close();
					}, 1000);
					

					break;

					case "http://192.168.137.100:5000/descargas/descargararchivoseiot/xlsx":
					$.fileDownload('{{url_for('static', filename = 'eiot-excel.zip')}}').done(function () { window.close();});
					setTimeout(function() {
					  window.close();
					}, 1000);
					break;

					case "http://192.168.137.100:5000/descargas/descargararchivosrefrigeradores/csv":
					$.fileDownload('{{url_for('static', filename = 'refrigeradores-csv.zip')}}').done(function () { window.close();});
					setTimeout(function() {
					  window.close();
					}, 1000);
					break;

					case "http://192.168.137.100:5000/descargas/descargararchivosrefrigeradores/xlsx":
					$.fileDownload('{{url_for('static', filename = 'refrigeradores-excel.zip')}}').done(function () { window.close();});
					setTimeout(function() {
					  window.close();
					}, 1000);

					break;

					default:

					break;

				  }
				  
				});
				</script>
				{% endblock %}
